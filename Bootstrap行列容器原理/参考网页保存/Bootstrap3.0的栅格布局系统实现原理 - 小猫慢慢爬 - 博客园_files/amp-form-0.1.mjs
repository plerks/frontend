;
(self.AMP=self.AMP||[]).push({m:1,v:"2203150226000",n:"amp-form",ev:"0.1",l:!0,f:function(t,e){(()=>{function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function i(t,i){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,i){if(t){if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n;function s(){return n||(n=Promise.resolve(void 0))}var r=class{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}};function o(t){return new Promise((e=>{e(t())}))}function a(t){return t?Array.prototype.slice.call(t):[]}var{isArray:c}=Array,{hasOwnProperty:u,toString:h}=Object.prototype;function l(t){return"[object Object]"===h.call(t)}function f(t){const e=Object.create(null);return t&&Object.assign(e,t),e}function d(t,e){return u.call(t,e)}function m(t,e,i,n,s,r,o,a,c,u,h){return t}var p="amp:dom-update",_="amp:form-value-change",b="name";function A(t){return(t.ownerDocument||t).defaultView}function P(t){return CSS.escape(t)}function v(t){m(/^[\w-]+$/.test(t))}function E(t,e){return v(e),e=e.toUpperCase(),function(t,i){const n=[];for(let i=t.parentElement;i;i=i.parentElement)i.tagName==e&&n.push(i);return n}(t)}function T(t){var e;null===(e=t.parentElement)||void 0===e||e.removeChild(t)}function y(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function g(t,e){const{length:i}=t;for(let n=0;n<i;n++)e(t[n],n)}function I(t){return t.__AMP_FORM||null}function R(t){const{elements:e}=t,i={},n=/^(?:input|select|textarea)$/i,s=/^(?:submit|button|image|file|reset)$/i,r=/^(?:checkbox|radio)$/i;for(let t=0;t<e.length;t++){const o=e[t],{checked:a,multiple:c,name:u,options:h,tagName:l,type:f,value:d}=o;!u||x(o)||!n.test(l)||s.test(f)||r.test(f)&&!a||(void 0===i[u]&&(i[u]=[]),c?g(h,(t=>{t.selected&&i[u].push(t.value)})):i[u].push(d))}const o=V(t);if(null!=o&&o.name){const{name:t,value:e}=o;void 0===i[t]&&(i[t]=[]),i[t].push(e)}return Object.keys(i).forEach((t=>{0==i[t].length&&delete i[t]})),i}function V(t){const{elements:e}=t,{activeElement:i}=t.ownerDocument,n=a(e).filter(w);return n.includes(i)?i:n[0]||null}function w(t){const{tagName:e,type:i}=t;return"BUTTON"==e||"submit"==i}function x(t){return t.disabled||E(t,"fieldset").some((t=>t.disabled))}function M(t){const e=t,i=t;switch(t.type){case"select-multiple":case"select-one":return a(e.options).every((({defaultSelected:t,selected:e})=>e===t));case"checkbox":case"radio":const{checked:t,defaultChecked:n}=i;return t===n;default:const{defaultValue:s,value:r}=i;return r===s}}var S=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function O(t,e=""){try{return decodeURIComponent(t)}catch(t){return e}}function j(t){const e=f();if(!t)return e;let i;for(;i=S.exec(t);){const t=O(i[1],i[1]),n=i[2]?O(i[2].replace(/\+/g," "),i[2]):"";e[t]=n}return e}var F=self.AMP_CONFIG||{},$=("string"==typeof F.thirdPartyFrameRegex?new RegExp(F.thirdPartyFrameRegex):F.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,k=("string"==typeof F.cdnProxyRegex?new RegExp(F.cdnProxyRegex):F.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function N(t){if(!self.document||!self.document.head)return null;if(self.location&&k.test(self.location.origin))return null;const e=self.document.head.querySelector(`meta[name="${t}"]`);return e&&e.getAttribute("content")||null}var X={thirdParty:F.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:F.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:$,cdn:F.cdnUrl||N("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:k,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:F.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:F.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:F.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:F.geoApiUrl||N("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var D=self.__AMP_LOG;function C(t,e){throw new Error("failed to call initLogConstructor")}function U(t){return D.user||(D.user=H()),function(t,e){return e&&e.ownerDocument.defaultView!=t}(D.user.win,t)?D.userForEmbed||(D.userForEmbed=H()):D.user}function H(t){return C()}function z(){return D.dev||(D.dev=C())}function L(t,e,i,n,s,r,o,a,c,u,h){return t}function G(t,e,i,n,s,r,o,a,c,u,h){return U().assert(t,e,i,n,s,r,o,a,c,u,h)}function q(t,e){return Q(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),e)}function B(t,e){return Q(Y(K(t)),e)}function J(t,e){const i=Y(K(t));return it(i,e)?Q(i,e):null}function W(t,e){return function(t,e){const i=tt(t,e);if(i)return i;const n=et(t);return n[e]=function(){const t=new r,{promise:e,reject:i,resolve:n}=t;return e.catch((()=>{})),{obj:null,promise:e,resolve:n,reject:i,context:null,ctor:null}}(),n[e].promise}(Y(t),e)}function Z(t,e){return tt(Y(t),e)}function K(t){return t.nodeType?(e=A(t),q(e,"ampdoc")).getAmpDoc(t):t;var e}function Y(t){const e=K(t);return e.isSingleDoc()?e.win:e}function Q(t,e){L(it(t,e));const i=et(t)[e];return i.obj||(L(i.ctor),L(i.context),i.obj=new i.ctor(i.context),L(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}function tt(t,e){const i=et(t)[e];return i?i.promise?i.promise:(Q(t,e),i.promise=Promise.resolve(i.obj)):null}function et(t){let e=t.__AMP_SERVICES;return e||(e=t.__AMP_SERVICES={}),e}function it(t,e){const i=t.__AMP_SERVICES&&t.__AMP_SERVICES[e];return!(!i||!i.ctor)}function nt(t,e,i,n){const s=Z(t,e);if(s)return s;const r=K(t);return r.whenExtensionsKnown().then((()=>{const t=r.getExtensionVersion(i);return t?q(r.win,"extensions").waitForExtension(i,t):null})).then((i=>i?n?Z(t,e):W(t,e):null))}var st,rt=t=>K(t),ot=t=>B(t,"mutator"),at=t=>J(t,"url"),ct=t=>B(t,"viewport");function ut(t,e,i,n){let s=t,r=i,o=t=>{try{return r(t)}catch(t){var e,i;throw null===(e=(i=self).__AMP_REPORT_ERROR)||void 0===e||e.call(i,t),t}};const a=function(){if(void 0!==st)return st;st=!1;try{const t={get capture(){return st=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return st}(),c=!(null==n||!n.capture);return s.addEventListener(e,o,a?n:c),()=>{null==s||s.removeEventListener(e,o,a?n:c),r=null,s=null,o=null}}function ht(t,e,i,n){const s={detail:i};return Object.assign(s,n),new t.CustomEvent(e,s)}function lt(t,e,i,n){return ut(t,e,i,n)}function ft(t,e,i,n){let s;const r=new Promise((n=>{s=function(t,e,i,n){let s=i;const r=ut(t,e,(t=>{try{s(t)}finally{s=null,r()}}),n);return r}(t,e,n,i)}));return r.then(s,s),n&&n(s),r}function dt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function mt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function pt(t,e){const i=q(t,"platform");return i.isIos()&&11==i.getMajorVersion()?new Pt(e):FormData.prototype.entries&&FormData.prototype.delete?new At(e):new bt(e)}var _t,bt=class{constructor(t){this.FX=t?R(t):f()}append(t,e,i){const n=String(t);this.FX[n]=this.FX[n]||[],this.FX[n].push(String(e))}delete(t){delete this.FX[t]}entries(){const t=[];Object.keys(this.FX).forEach((e=>{this.FX[e].forEach((i=>t.push([e,i])))}));let e=0;return{next:()=>e<t.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}getFormData(){const t=new FormData;return Object.keys(this.FX).forEach((e=>{this.FX[e].forEach((i=>t.append(e,i)))})),t}},At=class{constructor(t){this.UX=new FormData(t),this.HX(t)}HX(t){if(!t)return;const e=V(t);e&&e.name&&this.append(e.name,e.value)}append(t,e,i){this.UX.append(t,e)}delete(t){this.UX.delete(t)}entries(){return this.UX.entries()}getFormData(){return this.UX}},Pt=class extends At{constructor(t){super(t),t&&g(t.elements,(t=>{"file"==t.type&&0==t.files.length&&(this.UX.delete(t.name),this.UX.append(t.name,new Blob([]),""))}))}append(t,e,i){var n;e&&"object"==typeof e&&""==(n=e).name&&0==n.size?this.UX.append(t,new Blob([]),i||""):this.UX.append(t,e)}},vt=new Set(["c","v","a","ad"]),Et="__amp_source_origin",Tt=t=>"string"==typeof t?yt(t):t;function yt(t,e){return _t||(_t=self.document.createElement("a")),function(t,e,i){return t.href="",new URL(e,t.href)}(_t,t)}function gt(t,e,i){if(!e)return t;const n=t.split("#",2),s=n[0].split("?",2);let r=s[0]+(s[1]?i?`?${e}&${s[1]}`:`?${s[1]}&${e}`:`?${e}`);return r+=n[1]?`#${n[1]}`:"",r}function It(t,e){return`${encodeURIComponent(t)}=${encodeURIComponent(e)}`}function Rt(t){const e=[];for(const n in t){let s=t[n];if(null!=s){s=c(i=s)?i:[i];for(let t=0;t<s.length;t++)e.push(It(n,s[t]))}}var i;return e.join("&")}function Vt(t){return X.cdnProxyRegex.test(Tt(t).origin)}var wt,xt=["GET","POST"];function Mt(t,e){const i=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(i),!0).forEach((function(e){dt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):mt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e);if((n=e.body)&&"function"==typeof n.getFormData){const t=e.body;i.headers["Content-Type"]="multipart/form-data;charset=utf-8",i.body=function(t){const e=[];for(let i=t.next();!i.done;i=t.next())e.push(i.value);return e}(t.entries())}var n;return{input:t,init:i}}var St=["Webkit","webkit","Moz","moz","ms","O","o"],Ot={"getPropertyPriority":()=>"","getPropertyValue":()=>""};function jt(t,e,i,n,s){const r=function(t,e,i){if(e.startsWith("--"))return e;wt||(wt=f());let n=wt[e];if(!n||i){if(n=e,void 0===t[e]){const i=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(e),s=function(t,e){for(let i=0;i<St.length;i++){const n=St[i]+e;if(void 0!==t[n])return n}return""}(t,i);void 0!==t[s]&&(n=s)}i||(wt[e]=n)}return n}(t.style,e,s);if(!r)return;const o=n?i+n:i;t.style.setProperty(function(t){const e=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return St.some((t=>e.startsWith(t+"-")))?`-${e}`:e}(r),o)}function Ft(t,e){void 0===e&&(e=t.hasAttribute("hidden")),e?t.removeAttribute("hidden"):t.setAttribute("hidden","")}function $t(t){return`${t}px`}function kt(t,e){return t.getComputedStyle(e)||Ot}var Nt="autoexpand",Xt=class{static install(t){const e=t.getRootNode();let i=null;const n=()=>{const n=e.querySelector("textarea[autoexpand]");if(!n||i)return!n&&i?(i.dispose(),void(i=null)):void 0;i=new Xt(t)};lt(e,p,n),n()}constructor(t){const e=t.getRootNode();this.am=e.ownerDocument||e,this.i=L(this.am.defaultView),this.an=ct(t),this.Yv=[],this.Yv.push(lt(e,"input",(t=>{const e=t.target;"TEXTAREA"==e.tagName&&e.hasAttribute(Nt)&&Dt(e)}))),this.Yv.push(lt(e,"mousedown",(t=>{if(1!=t.which)return;const e=t.target;"TEXTAREA"==e.tagName&&function(t){const e=ot(t);Promise.all([e.measureElement((()=>t.scrollHeight)),ft(t,"mouseup")]).then((i=>{const n=i[0];let s=0;return e.measureMutateElement(t,(()=>{s=t.scrollHeight}),(()=>{!function(t,e,i){e!=i&&t.removeAttribute(Nt)}(t,n,s)}))}))}(e)})));let i=e.querySelectorAll("textarea");this.Yv.push(lt(e,p,(()=>{i=e.querySelectorAll("textarea")})));const n=function(t,e,i){let n=0,s=null;function r(i){s=null,n=t.setTimeout(o,100),e.apply(null,i)}function o(){n=0,s&&r(s)}return function(...t){n?s=t:r(t)}}(this.i,(t=>{t.relayoutAll&&g(i,(t=>{"TEXTAREA"==t.tagName&&t.hasAttribute(Nt)&&Dt(t)}))}));var s;this.Yv.push(this.an.onResize(n)),s=i,Promise.all(a(s).map((t=>function(t){return ot(t).measureElement((()=>t.scrollHeight>t.clientHeight))}(t).then((e=>{e&&t.removeAttribute(Nt)})))))}dispose(){this.Yv.forEach((t=>t()))}};function Dt(t){const e=ot(t),i=L(t.ownerDocument.defaultView);let n=0,s=0,r=0;const o=function(t){const e=L(t.ownerDocument),i=L(e.defaultView),n=L(e.body),s=ot(t),r=t.cloneNode(!1);r.classList.add("i-amphtml-textarea-clone");let o=0,a=0,c=!1;return s.measureMutateElement(n,(()=>{const e=kt(i,t),n=parseInt(e.getPropertyValue("max-height"),10);o=parseInt(e.getPropertyValue("width"),10),c=isNaN(n)||t.scrollHeight<n}),(()=>{c&&(t.scrollTop=0),jt(r,"width",$t(o)),e.body.appendChild(r)})).then((()=>s.measureMutateElement(n,(()=>{a=r.scrollHeight}),(()=>{T(r)})))).then((()=>a))}(t);return e.measureMutateElement(t,(()=>{const e=kt(i,t);s=t.scrollHeight;const o=parseInt(e.getPropertyValue("max-height"),10);r=isNaN(o)?1/0:o,n="content-box"==e.getPropertyValue("box-sizing")?-parseInt(e.getPropertyValue("padding-top"),10)-parseInt(e.getPropertyValue("padding-bottom"),10):parseInt(e.getPropertyValue("border-top-width"),10)+parseInt(e.getPropertyValue("border-bottom-width"),10)}),(()=>o.then((e=>{const o=e+n;t.classList.toggle("i-amphtml-textarea-max",o>r);const a="iAmphtmlHasExpanded"in t.dataset,c=/google/i.test(i.navigator.vendor)?3:0;(a||s<=e+c)&&(t.dataset.iAmphtmlHasExpanded="",jt(t,"height",$t(e+n)))}))))}var Ct={"INPUT":!0,"SELECT":!0,"TEXTAREA":!0},Ut="submit",Ht=1,zt=2,Lt=1,Gt=2,qt=3,Bt={"acceptCharset":{access:Ht,attr:"accept-charset"},"accessKey":{access:Ht,attr:"accesskey"},"action":{access:Ht,type:Lt},"attributes":{access:zt},"autocomplete":{access:Ht,def:"on"},"children":{access:zt},"dataset":{access:zt},"dir":{access:Ht},"draggable":{access:Ht,type:Gt,def:!1},"elements":{access:zt},"encoding":{access:zt},"enctype":{access:Ht},"hidden":{access:Ht,type:qt,def:!1},"id":{access:Ht,def:""},"lang":{access:Ht},"localName":{access:zt},"method":{access:Ht,def:"get"},"name":{access:Ht},"noValidate":{access:Ht,attr:"novalidate",type:qt,def:!1},"prefix":{access:zt},"spellcheck":{access:Ht},"style":{access:zt},"target":{access:Ht,def:""},"title":{access:Ht},"translate":{access:Ht}};function Jt(t){t.bubbleElement.removeAttribute("aria-alert"),t.bubbleElement.removeAttribute("role"),y(t.bubbleElement),Ft(t.bubbleElement,!1)}function Wt(t){t.targetRect=t.viewport.getLayoutRect(t.targetElement)}function Zt(t){y(t.bubbleElement);const e=t.bubbleElement.ownerDocument.createElement("div");e.id=`bubble-message-${t.id}`,e.textContent=t.message,t.bubbleElement.setAttribute("aria-labeledby",e.id),t.bubbleElement.setAttribute("role","alert"),t.bubbleElement.setAttribute("aria-live","assertive"),t.bubbleElement.appendChild(e),Ft(t.bubbleElement,!0),function(t,e){for(const i in e)jt(t,i,e[i])}(t.bubbleElement,{top:t.targetRect.top-10+"px",left:`${t.targetRect.left+t.targetRect.width/2}px`})}var Kt,Yt,Qt="Please match the requested format.",te=0,ee=class{constructor(t){this.form=t,this.ampdoc=rt(t),this.mutator=ot(t),this.root=this.ampdoc.getRootNode(),this.LX=null}report(){}onBlur(t){}onInput(t){}inputs(){return this.form.querySelectorAll("input,select,textarea")}checkInputValidity(t){if("TEXTAREA"===t.tagName&&t.hasAttribute("pattern")&&(t.checkValidity()||t.validationMessage===Qt)){const e=t.getAttribute("pattern"),i=new RegExp(`^${e}$`,"m").test(t.value);t.setCustomValidity(i?"":Qt)}return t.checkValidity()}checkFormValidity(t){return this.qX(t),t.checkValidity()}reportFormValidity(t){return this.qX(t),t.reportValidity()}qX(t){g(t.elements,(t=>{"TEXTAREA"==t.tagName&&this.checkInputValidity(t)}))}fireValidityEventIfNecessary(){const t=this.LX;if(this.LX=this.checkFormValidity(this.form),t!==this.LX){const t=ht(A(this.form),this.LX?"valid":"invalid",null,{bubbles:!0});this.form.dispatchEvent(t)}}},ie=class extends ee{report(){this.reportFormValidity(this.form),this.fireValidityEventIfNecessary()}},ne=class extends ee{constructor(t){super(t);const e="i-amphtml-validation-bubble-"+te++;this.BX=new class{constructor(t,e){this.Wt=e,this.an=ct(t),this.cr=q(t.win,"vsync"),this.JX=null,this.WX="",this.$i=!1,this.KX=t.win.document.createElement("div"),Ft(this.KX,!1),this.KX.classList.add("i-amphtml-validation-bubble"),this.KX.__BUBBLE_OBJ=this,t.getBody().appendChild(this.KX)}isActiveOn(t){return this.$i&&t==this.JX}hide(){this.$i&&(this.$i=!1,this.JX=null,this.WX="",this.cr.run({measure:void 0,mutate:Jt},{bubbleElement:this.KX}))}show(t,e){if(this.isActiveOn(t)&&e==this.WX)return;this.$i=!0,this.JX=t,this.WX=e;const i={message:e,targetElement:t,bubbleElement:this.KX,viewport:this.an,id:this.Wt};this.cr.run({measure:Wt,mutate:Zt},i)}}(this.ampdoc,e)}report(){const t=this.inputs();for(let e=0;e<t.length;e++)if(!this.checkInputValidity(t[e])){t[e].focus(),this.BX.show(t[e],t[e].validationMessage);break}this.fireValidityEventIfNecessary()}onBlur(t){"submit"!=t.target.type&&this.BX.hide()}onInput(t){const e=t.target;this.BX.isActiveOn(e)&&(this.checkInputValidity(e)?(e.removeAttribute("aria-invalid"),this.BX.hide()):(e.setAttribute("aria-invalid","true"),this.BX.show(e,e.validationMessage)))}},se=class extends ee{constructor(t){super(t),this.QX=this.form.id?this.form.id:String(Date.now()+Math.floor(100*Math.random())),this.EG=0}reportInput(t){const e=function(t){const e=["badInput"];for(const i in t.validity)e.includes(i)||e.push(i);const i=e.filter((e=>!0===t.validity[e]));return i.length?i[0]:null}(t);e&&this.showValidationFor(t,e)}TG(){return`i-amphtml-aria-desc-${this.QX}-${this.EG++}`}hideAllValidations(){const t=this.inputs();for(let e=0;e<t.length;e++)this.hideValidationFor(t[e])}getValidationFor(t,e){if(!t.id)return null;const i=this.IG(t,e),n="__AMP_VALIDATION_"+i;if(!(n in t)){const e=`[visible-when-invalid=${i}][validation-for=${t.id}]`;t[n]=this.root.querySelector(e)}return t[n]}IG(t,e){const{tagName:i,validationMessage:n}=t;return"TEXTAREA"===i&&"customError"===e&&n===Qt?"patternMismatch":e}showValidationFor(t,e){const i=this.getValidationFor(t,e);if(!i)return;i.textContent.trim()||(i.textContent=t.validationMessage),t.__AMP_VISIBLE_VALIDATION=i;let n=i.getAttribute("id");n||(n=this.TG(),i.setAttribute("id",n)),t.setAttribute("aria-invalid","true"),t.setAttribute("aria-describedby",n),this.mutator.mutateElement(i,(()=>i.classList.add("visible")))}hideValidationFor(t){const e=this.getVisibleValidationFor(t);e&&(delete t.__AMP_VISIBLE_VALIDATION,t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),this.mutator.mutateElement(e,(()=>e.classList.remove("visible"))))}getVisibleValidationFor(t){return t.__AMP_VISIBLE_VALIDATION}shouldValidateOnInteraction(t){throw Error("Not Implemented")}onInteraction(t){const e=t.target,i=!!e.checkValidity&&this.shouldValidateOnInteraction(e);this.hideValidationFor(e),i&&!this.checkInputValidity(e)&&this.reportInput(e)}onBlur(t){this.onInteraction(t)}onInput(t){this.onInteraction(t)}},re=class extends se{report(){this.hideAllValidations();const t=this.inputs();for(let e=0;e<t.length;e++)if(!this.checkInputValidity(t[e])){this.reportInput(t[e]),t[e].focus();break}this.fireValidityEventIfNecessary()}shouldValidateOnInteraction(t){return!!this.getVisibleValidationFor(t)}},oe=class extends se{report(){this.hideAllValidations();let t=null;const e=this.inputs();for(let i=0;i<e.length;i++)this.checkInputValidity(e[i])||(t=t||e[i],this.reportInput(e[i]));t&&t.focus(),this.fireValidityEventIfNecessary()}shouldValidateOnInteraction(t){return!!this.getVisibleValidationFor(t)}},ae=class extends se{shouldValidateOnInteraction(t){return!0}onInteraction(t){super.onInteraction(t),this.fireValidityEventIfNecessary()}},ce=class extends oe{shouldValidateOnInteraction(t){return!0}onInteraction(t){super.onInteraction(t),this.fireValidityEventIfNecessary()}},ue="__amp_form_verify",he=class{constructor(t){this.VG=t}onCommit(){return this.wG(),this.MG()?this.Yx():Promise.resolve({updatedElements:[],errors:[]})}Yx(){return Promise.resolve({updatedElements:[],errors:[]})}MG(){const{elements:t}=this.VG;for(let e=0;e<t.length;e++){const i=t[e];if(!i.disabled&&!M(i))return!0}return!1}wG(){const{elements:t}=this.VG;t&&g(t,(t=>{t.setCustomValidity("")}))}},le=class extends he{},fe=class extends he{constructor(t,e){super(t),this.SG=e,this.OG=null,this.jG=[]}Yx(){const t=this.SG().then((()=>[]),(t=>function(t){const{response:e}=t;return e?e.json().then((t=>t.verifyErrors||[]),(()=>[])):Promise.resolve([])}(t)));return this.FG(t).then((t=>this.$G(t)))}FG(t){if(!this.OG){this.OG=new class{constructor(t){if(this.kG=new r,this.NG=0,t)for(var e,n=i(t,!0);!(e=n()).done;){const t=e.value;this.add(t)}}add(t){const e=++this.NG;return t.then((t=>{this.NG===e&&this.kG.resolve(t)}),(t=>{this.NG===e&&this.kG.reject(t)})),this.kG.promise}then(t,e){return this.kG.promise.then(t,e)}};const t=()=>this.OG=null;this.OG.then(t,t)}return this.OG.add(t)}$G(t){const e=[],i=this.jG;this.jG=t;for(let i=0;i<t.length;i++){const n=t[i],s=U().assertString(n.name,"Verification errors must have a name property"),r=U().assertString(n.message,"Verification errors must have a message property"),o=U().assertElement(this.VG.querySelector(`[name="${s}"]`),"Verification error name property must match a field name");o.checkValidity()&&(o.setCustomValidity(r),e.push(o))}const n=i.filter((e=>t.every((t=>e.name!==t.name)))).map((t=>this.VG.querySelector(`[name="${t.name}"]`)));return{updatedElements:e.concat(n),errors:t}}};function de(t,e,i){if(e[i])return e[i];const n=t.querySelector(`style[${i}], link[${i}]`);return n?(e[i]=n,n):null}function me(t,e){const i=t.styleSheets;for(let t=0;t<i.length;t++)if(i[t].ownerNode==e)return!0;return!1}var pe="amp-form",_e=["amp-selector"],be="initial",Ae="verifying",Pe="submitting",ve="valid",Ee="invalid",Te="AMP-Redirect-To";function ye(t,e=!1){if(!t.checkValidity)return!0;let i=!1;const n=function(t){return t.classList.contains("user-valid")?ve:t.classList.contains("user-invalid")?Ee:"none"}(t),s=t.checkValidity();if(n!=ve&&s?(t.classList.add("user-valid"),t.classList.remove("user-invalid"),i=n==Ee):n==Ee||s||(t.classList.add("user-invalid"),t.classList.remove("user-valid"),i=!0),function(t){if(t.validity)for(const e in t.validity)t.classList.toggle(e,t.validity[e])}(t),e&&i){const e=E(t,"fieldset");for(let t=0;t<e.length;t++)ye(e[t]);t.form&&ye(t.form)}return s}function ge(t){ye(t,!0)}t.registerServiceForDoc("form-submit-service",class{constructor(){this._u=new class{constructor(){this._t=null}add(t){return this._t||(this._t=[]),this._t.push(t),()=>{this.remove(t)}}remove(t){this._t&&function(t,e){const i=t.indexOf(e);-1!=i&&t.splice(i,1)}(this._t,t)}removeAll(){this._t&&(this._t.length=0)}fire(t){if(this._t)for(var e,n=i(this._t,!0);!(e=n()).done;)(0,e.value)(t)}getHandlerCount(){var t,e;return null!==(t=null===(e=this._t)||void 0===e?void 0:e.length)&&void 0!==t?t:0}}}beforeSubmit(t){return this._u.add(t)}fire(t){this._u.fire(t)}}),t.registerServiceForDoc(pe,class{constructor(t){this.XG=this.DG(t).then((()=>this.CG(t)))}whenInitialized(){return this.XG}DG(t){const e=new r;return function(t,e,i,n,s){const r=t.getHeadNode(),o=function(t,e,i,n){let s=t.__AMP_CSS_SM;s||(s=t.__AMP_CSS_SM=f());const r=`amp-extension=${n}`;if(r){const i=de(t,s,r);if(i)return"STYLE"==i.tagName&&i.textContent!==e&&(i.textContent=e),i}const o=(t.ownerDocument||t).createElement("style");o.textContent=e;let a=null;return o.setAttribute("amp-extension",n),a=de(t,s,"amp-runtime"),function(t,e,i=null){if(!i)return void function(t,e){t.insertBefore(e,t.firstChild)}(t,e);const n=i.nextSibling;t.insertBefore(e,n)}(t,o,a),r&&(s[r]=o),o}(r,function(t,e){const i=t.__AMP_CSS_TR;return i?i(e):e}(r,'form.amp-form-submit-error [submit-error],form.amp-form-submit-success [submit-success],form.amp-form-submitting [submitting]{display:block}textarea[autoexpand]:not(.i-amphtml-textarea-max){overflow:hidden!important}.i-amphtml-textarea-clone{visibility:hidden;position:absolute;top:-9999px;left:-9999px;height:0!important}.i-amphtml-validation-bubble{transform:translate(-50%,-100%);background-color:#fff;box-shadow:0 5px 15px 0 rgba(0,0,0,.5);max-width:200px;position:absolute;display:block;box-sizing:border-box;padding:10px;border-radius:5px}.i-amphtml-validation-bubble:after{content:" ";position:absolute;bottom:-8px;left:30px;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #fff}[visible-when-invalid]{color:red}\n/*# sourceURL=/extensions/amp-form/0.1/amp-form.css*/'),0,"amp-form");if(i){const e=t.getRootNode();if(me(e,o))return i(o),o;const n=setInterval((()=>{me(e,o)&&(clearInterval(n),i(o))}),4)}}(t,0,e.resolve),e.promise}CG(t){return t.whenReady().then((()=>{const e=t.getRootNode();this.UG(e.querySelectorAll("form")),Xt.install(t),this.HG(e),this.zG(e)}))}UG(t){t&&g(t,((t,e)=>{I(t)||new class{constructor(t,e){try{!function(t){const e=((n=A(t)).FormProxy||(n.FormProxy=function(t){function e(t){this.VG=t}const i=e.prototype,{Object:n}=t,s=n.prototype;return[t.HTMLFormElement,t.EventTarget].reduce(((t,e)=>{let i=e&&e.prototype;for(;i&&i!==s&&!(t.indexOf(i)>=0);)t.push(i),i=n.getPrototypeOf(i);return t}),[]).forEach((e=>{for(const n in e){const r=t.Object.getOwnPropertyDescriptor(e,n);if(r&&n.toUpperCase()!=n&&!n.startsWith("on")&&!s.hasOwnProperty.call(i,n))if("function"==typeof r.value){const t=r.value;i[n]=function(){return t.apply(this.VG,arguments)}}else{const e={};r.get&&(e.get=function(){return r.get.call(this.VG)}),r.set&&(e.set=function(t){return r.set.call(this.VG,t)}),t.Object.defineProperty(i,n,e)}}})),e}(n)),n.FormProxy),i=new e(t);var n;"action"in i||function(t,e){const i=t.ownerDocument.defaultView.HTMLFormElement.prototype.cloneNode.call(t,!1);for(const n in i){if(n in e||n.toUpperCase()==n||n.startsWith("on"))continue;const i=Bt[n],s=t[n];if(i)if(i.access==zt){let i;if(s&&s.nodeType){const e=s,{nextSibling:r,parentNode:o}=e;o.removeChild(e);try{i=t[n]}finally{o.insertBefore(e,r)}}else i=s;Object.defineProperty(e,n,{get:()=>i})}else if(i.access==Ht){const s=i.attr||n;Object.defineProperty(e,n,{get(){const n=e.getAttribute(s);if(null==n&&void 0!==i.def)return i.def;if(i.type==Gt)return"true"===n;if(i.type==qt)return null!=n;if(i.type==Lt){const e=n||"";return at(t).parse(e).href}return n},set(t){i.type==qt&&(t=t?"":null),null!=t?e.setAttribute(s,t):e.removeAttribute(s)}})}else L(!1);else Object.defineProperty(e,n,{get:()=>t[n],set(e){t[n]=e}})}}(t,i),t.$p=i}(t)}catch(t){z().error(pe,"form proxy failed to install",t)}!function(t,e){t.__AMP_FORM=e}(t,this),this.Wt=e,this.am=t.ownerDocument,this.i=this.am.defaultView,this.ne=Q(this.i,"timer"),this.VG=t,this._i=rt(this.VG),this.LG=null,this.GG=(t=>J(t,"url-replace"))(this._i),this.sg=B(this._i,"templates"),this.$R=(t=>q(t,"xhr"))(this.i),this.xv=(t=>J(t,"action"))(this._i),this.cn=ot(this._i),this.Ee=(t=>B(t,"viewer"))(this._i),this.qG=new class{constructor(t,e,i){this.Ee=e,this.sg=i,this.Fj=t}isEnabled(){const t=this.Ee.getAmpDoc();return!(!t.isSingleDoc()||!t.getRootNode().documentElement.hasAttribute("allow-viewer-render-template"))&&this.Ee.hasCapability("viewerRenderTemplate")}assertTrustedViewer(t){return this.Ee.isTrustedViewer().then((e=>{G(e,"Refused to attempt SSR in untrusted viewer: ",t)}))}ssr(t,e,i=null,n={}){let s;return i||(s=this.sg.maybeFindTemplate(t)),this.assertTrustedViewer(t).then((()=>this.Ee.sendMessageAwaitResponse("viewerRenderTemplate",this.zj(e,s,i,n))))}applySsrOrCsrTemplate(t,e){let i;return this.isEnabled()?(G("string"==typeof e.html,"Skipping template rendering due to failed fetch"),i=this.assertTrustedViewer(t).then((()=>this.sg.findAndSetHtmlForTemplate(t,e.html)))):i=c(e)?this.sg.findAndRenderTemplateArray(t,e):this.sg.findAndRenderTemplate(t,e),i}zj(t,e,i,n={}){const s={"type":this.Fj},r=i&&i.successTemplate?i.successTemplate:e;r&&(s.successTemplate={"type":"amp-mustache","payload":r.innerHTML});const o=i&&i.errorTemplate?i.errorTemplate:null;return o&&(s.errorTemplate={"type":"amp-mustache","payload":o.innerHTML}),n&&Object.assign(s,n),{"originalRequest":Mt(t.xhrUrl,t.fetchOpt),"ampComponent":s}}}(pe,this.Ee,this.sg),this.Wb=(this.VG.getAttribute("method")||"GET").toUpperCase(),this.o=this.VG.getAttribute("target"),this.BG=this.JG("action-xhr"),this.WG=this.JG("verify-xhr"),this.ZG=this.KG("enctype"),this.YG=!this.VG.hasAttribute("novalidate"),this.VG.setAttribute("novalidate",""),this.YG||this.VG.setAttribute("amp-novalidate",""),this.VG.classList.add("i-amphtml-form"),this.Xt=be;const i=this.VG.elements;for(let t=0;t<i.length;t++){const{name:e}=i[t];G(e!=Et&&e!=ue,"Illegal input name, %s found: %s",e,i[t])}var n,s;this.QG=new class{constructor(t,e){this.VG=t,this.i=e,this.Xq=0,this.Uq=f(),this.Hq=null,this.Jq=!1,this.Wq=!1,this.aP(),this.Zq()}onSubmitting(){this.Jq=!0,this.Kq()}onSubmitError(){this.Jq=!1,this.Kq()}onSubmitSuccess(){this.Jq=!1,this.Hq=this.Qq(),this._W(),this.Kq()}Qq(){return pt(this.i,this.VG).getFormData()}Kq(){const t=this.Xq>0&&!this.Jq;if(t!==this.Wq){this.VG.classList.toggle("amp-form-dirty",t);const e=ht(this.i,"amp:form-dirtiness-change",{"isDirty":t},{bubbles:!0});this.VG.dispatchEvent(e)}this.Wq=t}aP(){this.VG.addEventListener("input",this.bW.bind(this)),this.VG.addEventListener("reset",this.AW.bind(this)),this.VG.addEventListener(_,this.bW.bind(this))}Zq(){for(let t=0;t<this.VG.elements.length;++t)this.PW(this.VG.elements[t]);this.Kq()}bW(t){const e=t.target;this.PW(e),this.Kq()}AW(t){this._W(),this.Kq()}PW(t){(function(t){const{hidden:e,name:i,tagName:n}=t;return!Ct[n]||!i||e||x(t)})(t)||(function(t){switch(t.tagName){case"INPUT":return"checkbox"==t.type||"radio"==t.type?!t.checked:!t.value;case"TEXTAREA":return!t.value;case"SELECT":return!1;default:throw new Error(`isFieldEmpty: ${t.tagName} is not a supported field element.`)}}(t)||M(t)||this.vW(t)?this.EW(t.name):this.TW(t.name))}vW(t){if(!this.Hq)return!1;const{name:e,value:i}=t;return this.Hq.get(e)===i}TW(t){this.Uq[t]||(this.Uq[t]=!0,++this.Xq)}EW(t){this.Uq[t]&&(this.Uq[t]=!1,--this.Xq)}_W(){this.Uq=f(),this.Xq=0}}(this.VG,this.i),this.yW=function(t){switch(t.getAttribute("custom-validation-reporting")){case"as-you-go":return new ae(t);case"show-all-on-submit":return new oe(t);case"interact-and-submit":return new ce(t);case"show-first-on-submit":return new re(t)}return t.ownerDocument&&void 0===Kt&&(Kt=!!document.createElement("form").reportValidity),Kt?new ie(t):new ne(t)}(this.VG),this.gW=(s=()=>this.IW(),(n=this.VG).hasAttribute("verify-xhr")?new fe(n,s):new le(n)),this.xv.addToAllowlist("FORM",["clear","submit"],["email"]),this.xv.installActionHandler(this.VG,this.RW.bind(this)),this.aP(),this.VW(),this.wW(),this.xW=null,this.MW=null,this.SW=null,(t=>W(t,"form-submit-service"))(t).then((t=>{this.SW=t})),this.OW=this.am&&function(t,e){const i=e.documentElement;return["âš¡4email","amp4email"].some((t=>i.hasAttribute(t)))}(0,this.am)}JG(t){const e=this.VG.getAttribute(t);if(e){const i=at(this._i);i.assertHttpsUrl(e,this.VG,t),G(!i.isProxyOrigin(e),"form %s should not be on AMP CDN: %s",t,this.VG)}return e}KG(t){const e=this.VG.getAttribute(t);return"application/x-www-form-urlencoded"===e||"multipart/form-data"===e?e:"multipart/form-data"}getXssiPrefix(){return this.VG.getAttribute("xssi-prefix")}requestForFormFetch(t,e,i,n){let s,r,o={"Accept":"application/json"};if("GET"==e||"HEAD"==e){this.jW();const e=this.FW();n&&n.forEach((t=>delete e[t])),i&&function(t,e,i=10){const n=[],s=[];for(s.push({t:t,s:e,d:0});s.length>0;){const{d:t,s:e,t:a}=s.shift();if(n.includes(e))throw new Error("Source object has a circular reference.");if(n.push(e),a!==e)if(t>i)Object.assign(a,e);else for(var r=0,o=Object.keys(e);r<o.length;r++){const i=o[r],n=e[i];if(d(a,i)){const e=a[i];if(l(n)&&l(e)){s.push({t:e,s:n,d:t+1});continue}}a[i]=n}}}(e,i),s=function(t,e){return gt(t,Rt(e))}(t,e)}else{s=t,"application/x-www-form-urlencoded"===this.ZG?(r=Rt(this.FW()),o={"Accept":"application/json","Content-Type":"application/x-www-form-urlencoded"}):(L("multipart/form-data"===this.ZG),r=pt(this.i,this.VG)),n&&n.forEach((t=>r.delete(t)));for(const t in i)r.append(t,i[t])}return{xhrUrl:s,fetchOpt:{"body":r,"method":e,"credentials":"include","headers":o}}}setXhrAction(t){this.BG=t}RW(t){return t.satisfiesTrust(2)?"submit"==t.method?this.$W().then((()=>this.kW(t))):("clear"===t.method&&this.NW(),null):null}$W(){if(this.LG)return this.LG;const t=a(this.VG.querySelectorAll(_e.join(","))).map((t=>t.build()));return this.LG=this.XW(t,2e3)}aP(){this._i.whenNextVisible().then((()=>{const t=this.VG.querySelector("[autofocus]");t&&function(t){try{t.focus()}catch(t){}}(t)})),this.VG.addEventListener("submit",this.DW.bind(this),!0),this.VG.addEventListener("blur",(t=>{ge(t.target),this.yW.onBlur(t)}),!0),this.VG.addEventListener(_,(t=>{ge(t.target),this.yW.onInput(t)}),!0),this.qG.isEnabled()||this.VG.addEventListener("change",(t=>{this.gW.onCommit().then((e=>{const{errors:i,updatedElements:n}=e;n.forEach(ge),this.yW.onBlur(t),this.Xt===Ae&&(i.length?(this.UW("verify-error"),this.HW({"verifyErrors":i}).then((()=>{this.zW("verify-error",i,2)}))):this.UW(be))}))})),this.VG.addEventListener("input",(t=>{ge(t.target),this.yW.onInput(t)}))}VW(){var t;(t=this._i,nt(t,"inputmask","amp-inputmask")).then((t=>{t&&t.install()}))}LW(t){this.GW(!1,"Form analytics not supported");const e={},i=this.FW();for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e["formFields["+t+"]"]=i[t].join(","));e.formId=this.VG.id;try{this.AJ(t,e)}catch(t){z().error(pe,"Sending analytics failed:",t)}}kW(t){return this.Xt!=Pe&&this.qW()?this.BW(t.trust,null):Promise.resolve(null)}NW(){this.VG.reset(),this.UW(be),this.VG.classList.remove("user-valid"),this.VG.classList.remove("user-invalid"),g(this.VG.querySelectorAll(".user-valid, .user-invalid"),(t=>{t.classList.remove("user-valid"),t.classList.remove("user-invalid")})),g(this.VG.querySelectorAll(".visible[validation-for]"),(t=>{t.classList.remove("visible")})),function(t){const e=document.createElement("input");for(const i in e.validity)g(t.querySelectorAll(`.${P(i)}`),(t=>{t.classList.remove(i)}))}(this.VG)}DW(t){return this.Xt!=Pe&&this.qW()?((this.BG||"POST"==this.Wb)&&t.preventDefault(),this.BW(3,t)):(t.stopImmediatePropagation(),t.preventDefault(),Promise.resolve(null))}BW(t,e){try{const t={form:this.VG,actionXhrMutator:this.setXhrAction.bind(this)};L(this.SW).fire(t)}catch(t){z().error(pe,"Form submit service failed: %s",t)}const i=this.JW(),n=this.VG.getElementsByClassName("i-amphtml-async-input");if(this.QG.onSubmitting(),!this.BG&&"GET"==this.Wb){if(this.GW(!1,"Non-XHR GETs not supported."),this.jW(),0===n.length){for(let t=0;t<i.length;t++)this.GG.expandInputValueSync(i[t]);const t=!e;return this.WW(t),this.QG.onSubmitSuccess(),s()}e&&e.preventDefault()}this.UW(Pe);const r=[],o=[];return o.push(this.ZW(i)),g(n,(t=>{const e=this.KW(t);t.classList.contains("i-async-require-action")?r.push(e):o.push(e)})),Promise.all(r).then((()=>this.XW(o,1e4).then((()=>this.YW(t)),(e=>this.QW(e,t)))),(e=>this.QW(e,t)))}QW(t,e){const i={};return t&&t.message&&(i.error=t.message),this.tZ(t,i,e)}JW(){return this.VG.querySelectorAll('[type="hidden"][data-amp-replace]')}YW(t){return this.BG?this.eZ(t):("POST"==this.Wb?this.iZ():"GET"==this.Wb&&this.WW(!0),s())}IW(){return this.Xt===Pe?s():(this.UW(Ae),this.zW("verify",null,3),this.ZW(this.JW()).then((()=>this.nZ())))}eZ(t){let e;return this.qG.isEnabled()?e=this.sZ(t):(this.rZ(t),e=this.oZ().then((e=>this.aZ(e,t)),(e=>this.cZ(e,t)))),e}sZ(t){const e=this.FW();return this.HW(e).then((()=>this.xv.trigger(this.VG,Ut,null,t))).then((()=>{const t=this.requestForFormFetch(this.BG,this.Wb);var e,i,n;return t.fetchOpt=function(t,e){const i=t||{},n=i.credentials;return m(void 0===n||"include"==n||"omit"==n),i.method=void 0===(s=i.method)?"GET":(s=s.toUpperCase(),m(xt.includes(s)),s),i.headers=i.headers||{},m(null!==i.body),i;var s}(t.fetchOpt),t.fetchOpt=function(t,e,i){i=i||{};const n=function(t){return t.origin||yt(t.location.href).origin}(t);return n==yt(e).origin&&(i.headers=i.headers||{},i.headers["AMP-Same-Origin"]="true"),i}(this.i,t.xhrUrl,t.fetchOpt),t.xhrUrl=(e=this.i,i=t.xhrUrl,n=t.fetchOpt,m("string"==typeof i),!1!==n.ampCors&&(i=function(t,e){return function(t){const e=j(yt(t).search);G(!(Et in e),"Source origin is not allowed in %s",t)}(e),function(t,e,i,n){return gt(t,It("__amp_source_origin",i),void 0)}(e,0,function(t){return yt(function(t){if(!Vt(t=Tt(t)))return t.href;const e=t.pathname.split("/"),i=e[1];G(vt.has(i),"Unknown path prefix in url %s",t.href);const n=e[2],s="s"==n?"https://"+decodeURIComponent(e[3]):"http://"+decodeURIComponent(n);return G(s.indexOf(".")>0,"Expected a . in origin %s",s),e.splice(1,"s"==n?3:2),s+e.join("/")+function(t,e){if(!t||"?"==t)return"";const i=new RegExp("[?&](amp_(js[^&=]*|gsa|r|kit)|usqp)\\b[^&]*","g"),n=t.replace(i,"").replace(/^[?&]/,"");return n?"?"+n:""}(t.search)+(t.hash||"")}(t)).origin}(t.location.href))}(e,i)),i),this.qG.ssr(this.VG,t,this.uZ())})).then((e=>this.hZ(e,t)),(e=>{const i={};return e&&e.message&&(i.error=e.message),this.tZ(e,i,t)}))}uZ(){let t;const e=this.VG.querySelector("[submit-success]");let i;e&&(t=this.sg.maybeFindTemplate(e));const n=this.VG.querySelector("[submit-error]");return n&&(i=this.sg.maybeFindTemplate(n)),{successTemplate:t,errorTemplate:i}}hZ(t,e){const i=t.init,n=function(t,e){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==e||e(t),null}}(t.body,(t=>U().error(pe,"Failed to parse response JSON: %s",t)));if(i){const s=i.status;if(s>=300)return this.tZ(s,t,e,n)}return this.lZ(t,e,n)}rZ(t){this.LW("amp-form-submit");const e=this.FW();this.HW(e).then((()=>{this.xv.trigger(this.VG,Ut,null,t)}))}ZW(t){const e=[];for(let i=0;i<t.length;i++)e.push(this.GG.expandInputValueAsync(t[i]));return this.XW(e,100)}KW(t){return t.getImpl().then((t=>t.getValue())).then((e=>{const i=t.getAttribute(b);let n=this.VG.querySelector(`input[name=${P(i)}]`);var s,r;n||(s=this.i.document,r={"name":t.getAttribute(b),"hidden":"true"},n=function(t,e){for(const i in e)t.setAttribute(i,e[i]);return t}(s.createElement("input"),r)),n.setAttribute("value",e),this.VG.appendChild(n)}))}oZ(){return this.SG(this.BG,this.Wb)}nZ(){const t=a(this.VG.querySelectorAll(`[${P("no-verify")}]`)).map((t=>t.name||t.id));return this.SG(this.WG,this.Wb,{[ue]:!0},t)}SG(t,e,i,n){this.GW(!1,"XHRs should be proxied.");const s=this.requestForFormFetch(t,e,i,n);return this.$R.fetch(s.xhrUrl,s.fetchOpt)}fZ(t){return t-1}aZ(t,e){return this.$R.xssiJson(t,this.getXssiPrefix()).then((t=>this.lZ(t,e)),(t=>U().error(pe,"Failed to parse response JSON: %s",t))).then((()=>{this.LW("amp-form-submit-success"),this.dZ(t)}))}lZ(t,e,i){return this.UW("submit-success"),o((()=>{this.HW(t||{}).then((()=>{const n=this.fZ(e);this.zW("submit-success",void 0===i?t:i,n),this.QG.onSubmitSuccess()}))}))}cZ(t,e){let i;if(t&&t.response){const e=t;i=this.$R.xssiJson(e.response,this.getXssiPrefix()).catch((()=>null))}else i=Promise.resolve(null);return i.then((i=>{this.tZ(t,i,e),this.LW("amp-form-submit-error"),this.dZ(t.response)}))}tZ(t,e,i,n){return this.UW("submit-error"),U().error(pe,"Form submission failed: %s",t),o((()=>{this.HW(e).then((()=>{const t=this.fZ(i);this.zW("submit-error",void 0===n?e:n,t),this.QG.onSubmitError()}))}))}iZ(){G(!1,"Only XHR based (via action-xhr attribute) submissions are supported for POST requests. %s",this.VG)}WW(t){this.LW("amp-form-submit"),t&&this.VG.submit(),this.UW(be)}GW(t,e){G(this.qG.isEnabled()===t,"[amp-form]: viewerRenderTemplate | %s",e)}jW(){G(0==this.VG.querySelectorAll("input[type=password],input[type=file]").length,"input[type=password] or input[type=file] may only appear in form[method=post]")}qW(){if(e=this.i.document,void 0===Yt&&(Yt=!!e.createElement("input").checkValidity),Yt){const e=(g((t=this.VG).querySelectorAll("input,select,textarea,fieldset"),(t=>ye(t))),ye(t));if(this.YG)return this.yW.report(),e}var t,e;return!0}dZ(t){if(this.GW(!1,"Redirects not supported."),!t||!t.headers)return;const e=t.headers.get(Te);if(e){G(!this.OW,"Redirects not supported in AMP4Email.",this.VG),G("_blank"!=this.o,"Redirecting to target=_blank using AMP-Redirect-To is currently not supported, use target=_top instead. %s",this.VG);try{const t=at(this._i);t.assertAbsoluteHttpOrHttpsUrl(e),t.assertHttpsUrl(e,"AMP-Redirect-To","Url")}catch(t){G(!1,"The `AMP-Redirect-To` header value must be an absolute URL starting with https://. Found %s",e)}(i=this._i,B(i,"navigation")).navigateTo(this.i,e,Te)}var i}zW(t,e,i){const n=ht(this.i,`${pe}.${t}`,{"response":e});this.xv.trigger(this.VG,t,n,i)}XW(t,e){return Promise.race([Promise.all(t),this.ne.promise(e)])}AJ(t,e){!function(t,e,i={},n=!0){var s;(s=t,nt(s,"amp-analytics-instrumentation","amp-analytics")).then((s=>{s&&s.triggerEventForTarget(t,e,i,n)}))}(this.VG,t,e)}FW(){return R(this.VG)}UW(t){const e=this.Xt;this.VG.classList.remove(`amp-form-${e}`),this.VG.classList.add(`amp-form-${t}`),this.mZ(e),this.Xt=t}HW(t){c(t)&&(t={});const e=this.VG.querySelector(`[${this.Xt}]`);let i=s();if(e){const n=`rendered-message-${this.Wt}`;e.setAttribute("role","alert"),e.setAttribute("aria-labeledby",n),e.setAttribute("aria-live","assertive"),this.sg.hasTemplate(e)?i=this.qG.applySsrOrCsrTemplate(L(e),t).then((t=>{let i;return c(t)?1===t.length?i=t[0]:(i=document.createElement("div"),t.forEach((t=>i.appendChild(t)))):i=t,i.id=n,i.setAttribute("i-amphtml-rendered",""),this.cn.mutateElement(e,(()=>{e.appendChild(i);const t=ht(this.i,p,null,{bubbles:!0});e.dispatchEvent(t)}))})):this.cn.mutateElement(e,(()=>{}))}return i}mZ(t){const e=this.VG.querySelector(`[${t}]`);if(!e)return;const i=(n=e,v("i-amphtml-rendered"),"> [i-amphtml-rendered]",n.querySelector(function(t,e){return t.replace(/^|,/g,"$&:scope ")}("> [i-amphtml-rendered]")));var n;i&&T(i)}wW(){if(Vt(this.i.location)||!this.VG.hasAttribute("data-initialize-from-url"))return;const t=["SELECT","TEXTAREA"],e=["color","date","datetime-local","email","hidden","month","number","range","search","tel","text","time","url","week"],i=["checkbox","radio"],n=(n,r)=>{if(n.hasAttribute("data-amp-replace"))return;if(!n.hasAttribute("data-allow-initialization"))return;const o=s[r]||"",a=n.getAttribute("type")||"text",c=n.tagName;if("INPUT"===c){if(e.includes(a.toLocaleLowerCase()))n.value!==o&&(n.value=o);else if(i.includes(a)){const t=n.value===o;n.checked!==t&&(n.checked=t)}}else t.includes(c)&&n.value!==o&&(n.value=o)},s=j(this.i.location.search);Object.keys(s).forEach((t=>{const e=this.VG.elements[t];e&&(e.nodeType===Node.ELEMENT_NODE?n(e,t):e.length&&g(e,(e=>n(e,t))))}))}renderTemplatePromiseForTesting(){return this.MW}xhrSubmitPromiseForTesting(){return this.xW}}(t,`amp-form-${e}`)}))}HG(t){t.addEventListener(p,(()=>{this.UG(t.querySelectorAll("form"))}))}zG(t){t.addEventListener("keydown",(t=>{if(t.defaultPrevented||"Enter"!=t.key||!t.ctrlKey&&!t.metaKey||"TEXTAREA"!==t.target.tagName)return;const{form:e}=t.target,i=e?I(e):null;i&&(i.DW(t),t.preventDefault())}))}})})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-form-0.1.mjs.map